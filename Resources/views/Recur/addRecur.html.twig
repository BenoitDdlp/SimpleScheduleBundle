{% extends "IDCISimpleScheduleBundle::adminbase.html.twig" %}

{% block body %}

{{ parent() }}

<div class="page-header">
  <h1>{% trans with {'%frequency%': frequency} %}Add a %frequency% recur{% endtrans %}</h1>
</div>

<form name="recur" action="{{ path('admin_recur_create', { 'calendar_entity_id': calendar_entity.id, 'frequency': frequency}) }}" method="post" {{ form_enctype(recur_form) }}>
    {{ form_widget(recur_form) }}
    <p>
        <button type="submit" class="btn btn-primary">{% trans %}Add{% endtrans %}</button>
    </p>
    <script type="text/javascript">
        $(document).ready(function() {
            var toHide = new Array();
            toHide.push($('form[name="recur"] #idci_bundle_simpleschedulebundle_weeklyrecurtype_rcount').parent('div'));
            toHide.push($('form[name="recur"] #idci_bundle_simpleschedulebundle_weeklyrecurtype_until').parent('div'));
            hide(toHide);

            $('form[name="recur"] .over_selection > input').change(function(event) {
                var id = $(this).val();
                var toDisplay = $('form[name="recur"] #'+id).parent('div');
                hide(toHide);
                toDisplay.show();
            });

        });

        function hide(toHide) {
            for(var i=0; i<toHide.length; i++) {
                toHide[i].hide();
            }
        }
    </script>
</form>

<ul class="record_actions">
    <li>
        <a class="btn" href="{{ path('admin_event_edit', { 'id': calendar_entity.id }) }}">
            {% trans %}Back to the event{% endtrans %}
        </a>
    </li>
</ul>
{% endblock body %}
